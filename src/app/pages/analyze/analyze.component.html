<h1>analisar construção</h1>

<section class="filter">
	<input #search type="text" name="search" placeholder="nome da jornada" class="search" />
	<input #version type="number" name="version" placeholder="versão" class="version" />
	&nbsp;&nbsp;
	<button (click)="loadData(search.value)">analisar</button>
</section>

<section class="grid-container">
	@if (getTabs().length > 0) {
		<div class="tabs">
			<div class="tab-buttons">
				@for (tab of getTabs(); track $index) {
					<div class="tab-button-group">
					<button [class.active]="selectedKey === tab" (click)="selectTab(tab)">
						{{ tab }}
					</button>
					<button (click)="closeTab(tab)">x</button>
				</div>
				}
			</div>
			<div class="tab-content">
				<div class="box aside">
					@for (item of selectedData.statistics?.types; track $index) {
						<span class="pill">{{ item.toString().replace(',', ' >> ') }}</span>
					}

					<span class="separator"></span>

					<!-- @for (
				item of [
					{ title: 'Explore the Docs', link: 'https://angular.dev' },
					{ title: 'Learn with Tutorials', link: 'https://angular.dev/tutorials' },
					{ title: 'CLI Docs', link: 'https://angular.dev/tools/cli' },
					{ title: 'Angular Language Service', link: 'https://angular.dev/tools/language-service' },
					{ title: 'Angular DevTools', link: 'https://angular.dev/tools/devtools' },
				];
				track item.title
			) { -->
					@for (item of selectedData.externalFlows; track $index) {
						<!-- <a class="pill" [href]="item.flowId" target="_blank" rel="noopener"> -->
							<span class="pill" (click)="loadData(item.flowName)"  aria-hidden="true" >
								<svg xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 -960 960 960" width="16px" fill="currentColor">
									<path d="M824-120 636-308q-41 32-90.5 50T440-240q-90 0-162.5-44T163-400h98q34 37 79.5 58.5T440-320q100 0 170-70t70-170q0-100-70-170t-170-70q-94 0-162.5 63.5T201-580h-80q8-127 99.5-213.5T440-880q134 0 227 93t93 227q0 56-18 105.5T692-364l188 188-56 56ZM397-400l-63-208-52 148H80v-60h160l66-190h60l61 204 43-134h60l60 120h30v60h-67l-47-94-50 154h-59Z"/>
								</svg>
								&nbsp;
								<span>{{ item.flowName }}</span>
						</span>
						<!-- </a> -->
					}
				</div>

				<div class="content">
					<app-table
						[data]="selectedData.data"
						[caption]="selectedData.title"
						[noRenderData]="true"
						[ignoreColumns]="ignoreColumns">
						@for (item of selectedData.data; track $index) {
							<tr class="{{ item['level'] }}">
								@for (key of selectedData.keys; track $index) {
									<td [attr.data-th]="key" [ngClass]="key.includes('Id') ? 'nowrap' : ''">
										{{ item[key] }}
									</td>
								}
							</tr>
						}
					</app-table>
				</div>
			</div>
		</div>
	}
</section>

<app-code-modal [title]="codeModal.title" [data]="codeModal.data"></app-code-modal>
